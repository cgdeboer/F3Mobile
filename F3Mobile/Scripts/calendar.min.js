define(["jquery","toastr","moment","text!templates/currentweekitem.html","mustache","underscore","calendarService"],function(n,t,i,r,u,f,e){function w(n){e.initialize({calSvcUrl:n.calSvcUrl});l()}function b(n){var u=i(),t=i().startOf("week"),r=i().endOf("week");return n.isBetween(t,r)}function g(){var t=f.sortBy(h,"name");n.each(t,function(t,r){var o=n("#itemHolder"),u,e;o.append("<div><p class='lead'>"+r.summary+"<\/p><\/div>");u="<ul class='list-group'>";e={name:r.name,description:"",date:{}};n.each(f.sortBy(r.items,"Start.Date"),function(n,t){var f=t.Start.Date===null?i(t.Start.DateTime):i(t.Start.Date),o;b(f)&&(e={name:r.name,description:t.summary,date:f.format("MM/DD/YYYY")},s.push(e));o=i(t.Start.Date!=null?t.Start.Date:t.Start.DateTime);u+='<li class="list-group-item">'+o.format("MM/DD/YYYY")+" - "+t.Summary+"<\/li>"});u+="<\/ul>";o.append(u)});nt()}function nt(){var t=f.sortBy(s,"Date");n.each(t,function(t,i){var f=u.to_html(r,i);n("#currentWeekItems").append(f)})}function o(n){console&&console.log&&console.log(n)}function l(){var t=[];n.each(v,function(i,r){var u=n.Deferred();t.push(u);tt(r,function(){u.resolve()})});n.when.apply(this,t).done(function(){g();o("all done");n("#loading").remove();n("#current").addClass("active")})}function tt(n,t){e.getEvents(n.id,function(i){o("success get: "+n.name);h.push({summary:i.Summary,name:n.name,items:i.Items});t()},function(){t()})}var a=["https://www.googleapis.com/auth/calendar.readonly"],v=[{name:"Bagpipe",id:"l5jvg6rn8d1bpcqg76l14hoq7o@group.calendar.google.com"},{name:"Stonehenge",id:"1gb26eve59nn0ipbpn33ud9tk8@group.calendar.google.com"},{name:"The Brave",id:"um2l72805ggd9nqoq411nf6p50@group.calendar.google.com"},{name:"The Maul",id:"sn0n3fk13inesa7cju33fpejg4@group.calendar.google.com"},{name:"The Foxhole",id:"foxholef3@gmail.com"}],y="",p="",s=[],h=[];return{initialize:w}});
//# sourceMappingURL=calendar.min.js.map
