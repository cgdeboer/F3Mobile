function checkAuth(){logger("checkAuth");try{gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES,immediate:!0},handleAuthResult)}catch(n){logger("auth call failed: "+n.message)}}function handleAuthResult(n){var t=document.getElementById("authorize-div");n&&!n.error?(t.style.display="none",token=n.access_token,loadCalendarApi(),showLogout(!0)):(showLogout(!1),t.style.display="inline")}function showLogout(n){$("#logout-div").toggle(n)}function loadCalendarApi(){logger("load calendar");gapi.client.load("calendar","v3",getAllEvents)}function getAllEvents(){for(var t,n=0;n<Calendars.length;n++)t=Calendars[n],listUpcomingEvents(t)}function displayEvents(n){var i=$("#itemHolder"),t;i.append("<div><p>"+n.name+"<\/p><\/div>");t="<ul class='list-group'>";$.each(n.items,function(n,i){t+='<li class="list-group-item">'+i.start.date+" - "+i.summary+"<\/li>"});t+="<\/ul>";i.append(t)}function logger(n){toastr.info(n)}function listUpcomingEvents(n){logger("get: "+n.name);var t=gapi.client.calendar.events.list({calendarId:n.id,timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"});t.execute(function(t){var i={name:n.name,items:t.items};i.items.length>0&&(allEvents.push(i),displayEvents(i))})}var SCOPES=["https://www.googleapis.com/auth/calendar.readonly"],Calendars=[{name:"Bagpipe",id:"l5jvg6rn8d1bpcqg76l14hoq7o@group.calendar.google.com"},{name:"Stonehenge",id:"1gb26eve59nn0ipbpn33ud9tk8@group.calendar.google.com"},{name:"The Brave",id:"um2l72805ggd9nqoq411nf6p50@group.calendar.google.com"},{name:"The Maul",id:"sn0n3fk13inesa7cju33fpejg4@group.calendar.google.com"}],token="",allEvents;$("#authorize-button").on("click",function(){return gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES,immediate:!1},handleAuthResult),!1});$("#logout-button").on("click",function(){gapi.auth.signOut();$.ajax({url:"https://accounts.google.com/o/oauth2/revoke?token="+token,type:"get",dataType:"jsonp"}).success(function(){document.location.reload()})});allEvents=[];
//# sourceMappingURL=calendar.min.js.map
