define(["jquery","toastr","moment","text!templates/currentweekitem.html","text!templates/aoTemplate.html","mustache","underscore","calendarService"],function(n,t,i,r,u,f,e,o){function k(t){o.initialize({calSvcUrl:t.calSvcUrl});a(!1);n(".nav-tabs").bind("click",function(n){n.target.text==="All"?a(!0):a(!1)});n("#workout").change(function(){var t=n(this).find("option:selected").val();t==="All"?n("div.ao").show():(n("div.ao").hide(),n("div.ao[data-name='"+t+"']").show())})}function d(n){var u=i(),t=i().startOf("week"),r=i().endOf("week");return n.isBetween(t,r)}function tt(t){var r=e.sortBy(t?c:h,"name"),s=n("#itemHolder"),o;n.each(r,function(t,r){r.items=e.sortBy(r.items,"Start.Date");n.each(r.items,function(n,t){var u=t.Start.Date===null?i(t.Start.DateTime):i(t.Start.Date),f;d(u)&&(f={name:r.name,description:t.Summary,date:u.format("MM/DD/YYYY")},l.push(f));t.displayDate=u.format("MM/DD/YYYY")})});t?(o=f.to_html(u,r),s.append(o)):it()}function it(){var t=e.sortBy(l,"date"),i=f.to_html(r,t);n("#currentWeekItems").html(i)}function s(n){console&&console.log&&console.log(n)}function a(t){var i=[];n.each(p,function(r,u){var f=n.Deferred();i.push(f);rt(u,t,function(){f.resolve()})});n.when.apply(this,i).done(function(){tt(t);s("all done")})}function rt(n,t,i){c=[];h=[];l=[];o.getEvents(n.id,t,function(r){s("success get: "+n.name);item={id:n.id,summary:r.Summary,name:n.name,items:r.Items};t?c.push(item):h.push(item);i()},function(){i()})}var y=["https://www.googleapis.com/auth/calendar.readonly"],p=[{name:"Bagpipe",id:"l5jvg6rn8d1bpcqg76l14hoq7o@group.calendar.google.com"},{name:"Stonehenge",id:"1gb26eve59nn0ipbpn33ud9tk8@group.calendar.google.com"},{name:"The Brave",id:"um2l72805ggd9nqoq411nf6p50@group.calendar.google.com"},{name:"The Maul",id:"sn0n3fk13inesa7cju33fpejg4@group.calendar.google.com"},{name:"The Foxhole",id:"foxholef3@gmail.com"},{name:"Rebel Yell",id:"clkjm5a176r66ng4q5sddreaug@group.calendar.google.com"}],w="",b="",h=[],c=[],l=[];return{initialize:k}});
//# sourceMappingURL=calendar.min.js.map
