define(["jquery","toastr","moment","text!templates/currentweekitem.html","text!templates/aoTemplate.html","mustache","underscore","calendarService"],function(n,t,i,r,u,f,e,o){function b(t){o.initialize({calSvcUrl:t.calSvcUrl});a();n("#workout").change(function(){var t=n(this).find("option:selected").val();t==="All"?n("div.ao").show():(n("div.ao").hide(),n("div.ao[data-name='"+t+"']").show())})}function k(n){var u=i(),t=i().startOf("week"),r=i().endOf("week");return n.isBetween(t,r)}function nt(){var t=e.sortBy(c,"name"),o=n("#itemHolder"),r;n.each(t,function(t,r){r.items=e.sortBy(r.items,"Start.Date");n.each(r.items,function(n,t){var u=t.Start.Date===null?i(t.Start.DateTime):i(t.Start.Date),f;k(u)&&(f={name:r.name,description:t.Summary,date:u.format("MM/DD/YYYY")},h.push(f));t.displayDate=u.format("MM/DD/YYYY")})});r=f.to_html(u,t);o.append(r);tt()}function tt(){var t=e.sortBy(h,"date"),i=f.to_html(r,t);n("#currentWeekItems").append(i)}function s(n){console&&console.log&&console.log(n)}function a(){var t=[];n.each(y,function(i,r){var u=n.Deferred();t.push(u);it(r,function(){u.resolve()})});n.when.apply(this,t).done(function(){nt();s("all done");n("#loading").remove();n("#current").addClass("active")})}function it(n,t){o.getEvents(n.id,function(i){s("success get: "+n.name);c.push({id:n.id,summary:i.Summary,name:n.name,items:i.Items});t()},function(){t()})}var v=["https://www.googleapis.com/auth/calendar.readonly"],y=[{name:"Bagpipe",id:"l5jvg6rn8d1bpcqg76l14hoq7o@group.calendar.google.com"},{name:"Stonehenge",id:"1gb26eve59nn0ipbpn33ud9tk8@group.calendar.google.com"},{name:"The Brave",id:"um2l72805ggd9nqoq411nf6p50@group.calendar.google.com"},{name:"The Maul",id:"sn0n3fk13inesa7cju33fpejg4@group.calendar.google.com"},{name:"The Foxhole",id:"foxholef3@gmail.com"},{name:"Rebel Yell",id:"clkjm5a176r66ng4q5sddreaug@group.calendar.google.com"}],p="",w="",h=[],c=[];return{initialize:b}});
//# sourceMappingURL=calendar.min.js.map
