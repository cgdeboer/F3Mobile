define(["jquery","toastr","moment","text!templates/currentweekitem.html","text!templates/aoTemplate.html","text!templates/firstf.html","mustache","underscore","calendarService"],function(n,t,i,r,u,f,e,o,s){function tt(t){s.initialize({calSvcUrl:t.calSvcUrl,calListUrl:t.calListUrl});y(!1);n(".nav-tabs").bind("click",function(n){n.target.text==="All"?y(!0):n.target.text==="This Week"?y(!1):ot()});n("#workout").change(function(){var t=n(this).find("option:selected").val();t==="All"?n("div.ao").show():(n("div.ao").hide(),n("div.ao[data-name='"+t+"']").show())})}function it(n){var u=i(),t=i().startOf("week"),r=i().endOf("week");return n.isBetween(t,r)}function ft(t){var r=o.sortBy(t?a:l,"name"),s=n("#itemHolder"),f;n.each(r,function(t,r){r.items=o.sortBy(r.items,"Start.Date");n.each(r.items,function(n,t){var u=t.Start.Date===null?i(t.Start.DateTime):i(t.Start.Date),f;it(u)&&(f={name:r.name,description:t.Summary,date:u.format("MM/DD/YYYY"),location:r.location},v.push(f));t.displayDate=u.format("MM/DD/YYYY")})});t?(f=e.to_html(u,r),s.html(f)):et()}function et(){var t=o.sortBy(v,"date"),i=e.to_html(r,t);n("#currentWeekItems").html(i)}function c(n){console&&console.log&&console.log(n)}function ot(){if(p==!1&&h&&h.Items&&h.Items.length>0){n("#loading-firstf").hide();n.each(h.Items,function(n,t){try{var i=JSON.parse(t.Description);t.SiteQ=i.SiteQ;t.Meets=i.Meets;t.LocationHint=i.LocationHint;t.DisplayLocation=i.DisplayLocation;t.Time=i.Time}catch(r){t.SiteQ=t.Description;t.Meets=t.Description;t.LocationHint=null;t.DisplayLocation=t.Location||"";t.Time=""}});var t=o(h.Items).chain().sortBy(function(n){return n.Summary}).sortBy(function(n){var t=o.findWhere(nt,{day:n.Meets});return t?t.val:""}).value(),i=e.to_html(f,t);n("#firstF").append(i);p=!0}}function y(t){n("#loading-"+(t?"all":"current")).show();var i=[];s.getList(function(r){h=r;n.each(k,function(r,u){var f=n.Deferred();i.push(f);st(u,t,h,function(){f.resolve()})});n.when.apply(this,i).done(function(){ft(t);c("all done");n("#loading-"+(t?"all":"current")).hide()})},function(){console.log("unable to get list")})}function st(n,t,i,r){var u=o.findWhere(i.Items,{Id:n.id});a=[];l=[];v=[];s.getEvents(n.id,t,function(i){c("success get: "+n.name);item={id:n.id,summary:i.Summary,name:n.name,items:i.Items,location:u.Location||""};t?a.push(item):l.push(item);r()},function(){r()})}var b=["https://www.googleapis.com/auth/calendar.readonly"],k=[{name:"Bagpipe",id:"l5jvg6rn8d1bpcqg76l14hoq7o@group.calendar.google.com"},{name:"Stonehenge",id:"1gb26eve59nn0ipbpn33ud9tk8@group.calendar.google.com"},{name:"The Brave",id:"um2l72805ggd9nqoq411nf6p50@group.calendar.google.com"},{name:"The Maul",id:"sn0n3fk13inesa7cju33fpejg4@group.calendar.google.com"},{name:"The Foxhole",id:"foxholef3@gmail.com"},{name:"Rebel Yell",id:"clkjm5a176r66ng4q5sddreaug@group.calendar.google.com"},{name:"Dromedary",id:"e77m27ijnivjs6ef9hmmm1tu48@group.calendar.google.com"},{name:"Death Valley",id:"u90i7kf9uf92f8uemrhtr5jq6k@group.calendar.google.com"},{name:"Fight Club",id:"b4p5q90psg3h0t57et1ug7cofo@group.calendar.google.com"},{name:"Centurion",id:"bdfeim53d2eg11f0kg372pshvc@group.calendar.google.com"}],d="",g="",l=[],a=[],v=[],h=[],p=!1,nt=[{val:0,day:"Monday"},{val:1,day:"Tuesday"},{val:2,day:"Wednesday"},{val:3,day:"Thursday"},{val:4,day:"Friday"},{val:5,day:"Saturday"},{val:6,day:"Sunday"}];return{initialize:tt}});
//# sourceMappingURL=calendar.min.js.map
